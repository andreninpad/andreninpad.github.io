<!--JavaScript is a powerful scripting language that can be use to make web pages interactive. It's one of the core technologies of the web, along with HTML and CSS. All modern browsers support JavaScript.
Learn fundamental programming concepts in JavaScript by coding a Role Playing Game. Learn how to work with arrays, strings, objects, functions, loops, if/else statements, and more.-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="Images/anp.svg" type="image/x-icon">
<title>Role Playing Game</title>
<style>
body {background-color: #0a0a23; display: flex;}    
#text {
  background-color: #0a0a23;
  color: #ffffff;
  padding: 10px;
  text-align: center;
  font-size: large;
}    
#game {
  display: flex;
  background-color: #ffffff;
  color: #ffffff;
  margin: 30px auto 0px;
  padding: 10px;
  flex-direction: column;
  justify-content: center;
}    
#controls, #stats {
  display: flex;
  justify-content: center;
  border: 1px solid #0a0a23;
  padding: 5px;
  color: #0a0a23;
  font-size: x-large;
  gap: 10px;
}
#monsterStats {
  display: none;
  border: 1px solid #0a0a23;
  padding: 5px;
  color: #ffffff;
  background: #c70d0d;
  font-size: x-large;
}
.stat {padding-right: 10px;}
button {
  cursor: pointer;
  color: #0a0a23;
  background-color: #feac32;
  background-image: linear-gradient(#fecc4c, #ffac33);
  border: 3px solid #feac32;
  width: 400px;
  height: 100px;
  font-size: xx-large;
  border-radius: 100%;
}
button:hover {background: radial-gradient(#c70d0d, #ffffff);}
button:active {background: radial-gradient(#ffffff, #ffac33);}
@media (min-width: 300px) and (max-width: 900px) {
  #text {
    font-size: small;
  }
  #game {
    margin: 10px auto 0px;

  }    
  #controls, #stats {
    font-size: small;
  }
  #monsterStats {
    font-size: small;
  }
  button {
    font-size: small;
    font-weight: bold;
    width: 200px;
    height: 100px;
  }
}
</style>
</head>
<body>
<div id="game">
  <div id="stats">
    <span class="stat">XP: <strong><span id="xpText">0</span></strong></span>
    <span class="stat">Health: <strong><span id="healthText">100</span></strong></span>
    <span class="stat">Gold: <strong><span id="goldText">50</span></strong></span>
  </div>
  <div id="controls">
    <button id="button1">Go to store</button>
    <button id="button2">Go to cave</button>
    <button id="button3">Fight dragon</button>
  </div>
  <div id="monsterStats">
    <span class="stat">Monster Name: <strong><span id="monsterName"></span></strong></span>
    <span class="stat">Health: <strong><span id="monsterHealth"></span></strong></span>
  </div>
  <div id="text">
    Welcome to Dragon Repeller. You must defeat the dragon that is preventing people from leaving the town. You are in the town square. Where do you want to go? Use the buttons above.
  </div>
</div>
</body>
<script>
/*JavaScript interacts with the HTML using the Document Object Model, or DOM. The DOM is a tree of objects that represents the HTML. HTML can be accessed using the document object, which represents the entire HTML document.
One method for finding specific elements in the HTML is using the querySelector() method. The querySelector() method takes a CSS selector as an argument and returns the first element that matches that selector. For example, to find the <h1> element in the HTML, write as the example code:
let h1 = document.querySelector("h1");
Note that h1 is a string and matches the CSS selector you would use.*/
let xp = 0;
let health = 100;
let gold = 50;
let currentWeapon = 0;
let fighting;
let monsterHealth;
let inventory = ["stick"];
/*Variables that is not going to be reassigned. If a variable is not going to be reassigned to a new value, it is best practice to use the const keyword to declare it instead of the let keyword. This will tell JavaScript to throw an error if accidentally reassigning it.*/
const button1 = document.querySelector('#button1');
const button2 = document.querySelector('#button2');
const button3 = document.querySelector('#button3');
const text = document.querySelector('#text');
const xpText = document.querySelector('#xpText');
const healthText = document.querySelector('#healthText');
const goldText = document.querySelector('#goldText');
const monsterStats = document.querySelector('#monsterStats');
const monsterName = document.querySelector('#monsterName');
const monsterHealthText = document.querySelector('#monsterHealth');/*Use querySelector() to get the #monsterHealth element. Because #monsterHealth variable has already been declared earlier, it needs to use a different variable name for this element. Declare a new variable with the const keyword and name it monsterHealthText.*/
const weapons = [
{ name: 'stick', power: 5 },
{ name: 'dagger', power: 30 },
{ name: 'claw hammer', power: 50 },
{ name: 'sword', power: 100 }
  /*Objects are non primitive data types that store key-value pairs. Non primitive data types are mutable data types that are not undefined, null, boolean, number, string, or symbol. Mutable means that the data can be changed after it is created. Objects are similar to arrays, except that instead of using indexes to access and modify their data, access the data in objects through properties. Properties consist of a key and a value. The key is the name of the property, and the value is the data stored in the property. If the property name (key) of an object has a space in it, use single or double quotes around the name.
  Here is the basic syntax for an object:
  {
    key: value,
    "Space Name": "Kirk"
  };
  There are two ways to access the properties of an object: dot notation (.) and bracket notation ([]), similar to an array. Example Code: object.property;
  Here is a sample of using dot notation (.) to read the name property of the developer object:
  Example Code:
  const developer = {
    name: "Jessica",
  };
  //Output: Jessica
  console.log(developer.name);
  The second way to access the properties of an object is bracket notation ([]). If the property of the object you are trying to access has a space in its name, you will need to use bracket notation. Example Code: objectName["property name"];
  Here is a sample of using bracket notation to read an object's property: Example Code:
  const spaceObj = {
    "Space Name": "Kirk",
  };
  spaceObj["Space Name"]; //"Kirk"
  */
];
const monsters = [
  {
    name: "slime",
    level: 2,
    health: 15
  },
  {
    name: "fanged beast",
    level: 8,
    health: 60
  },
  {
    name: "dragon",
    level: 20,
    health: 300
  }
];
const locations = [
  {
    name: "town square",
    "button text": ["Go to store", "Go to cave", "Fight dragon"],
    "button functions": [goStore, goCave, fightDragon],
    text: "You are in the town square. You see a sign that says \"Store\"."/*Wrap the text Store in double quotes. Because the string is already wrapped in double quotes, it must escape the quotes around Store. To escape them use a backslash \. Here is an example code: const escapedString = "Naomi likes to play \"Zelda\" sometimes.";*/
  },
  {
    name: "store",
    "button text": ["Buy 10 health (10 gold)", "Buy weapon (30 gold)", "Go to town square"],
    "button functions": [buyHealth, buyWeapon, goTown],
    text: "You enter the store."
  },
  {
    name: "cave",
    "button text": ["Fight slime", "Fight fanged beast", "Go to town square"],
    "button functions": [fightSlime, fightBeast, goTown],
    text: "You enter the cave. You see some monsters."
  },
  {
    name: "fight",
    "button text": ["Attack", "Dodge", "Run"],
    "button functions": [attack, dodge, goTown],
    text: "You are fighting a monster."
  },
  {
    name: "kill monster",
    "button text": ["Go to town square", "Go to town square", "Go to town square"],
    "button functions": [goTown, goTown, easterEgg], //The button for easterEgg.
    text: 'The monster screams "Arg!" as it is defeated and vanishes. You gain experience points and finds gold.'
  },
  {
    name: "lose",
    "button text": ["REPLAY?", "REPLAY?", "REPLAY?"],
    "button functions": [restart, restart, restart],
    text: "You die. &#x2620;"
  },
  { 
    name: "win", 
    "button text": ["REPLAY?", "REPLAY?", "REPLAY?"], 
    "button functions": [restart, restart, restart], 
    text: "You defeated the dragon! YOU WON THE GAME! &#x1F389;"
  },
  {
    name: "easter egg",
    "button text": ["2", "8", "Go to town square?"],
    "button functions": [pickTwo, pickEight, goTown],
    text: "You found a secret game. Pick a number above. Ten numbers will be randomly chosen between 0 and 10. If the number you choose matches one of the random numbers, you win!"
  }
];

// initialize buttons
button1.onclick = goStore;
button2.onclick = goCave;
button3.onclick = fightDragon;/*button1, button2, and button3 represents the first, second, and third button elements. These elements have a special property called onclick, which can be use to determine what happens when someone clicks it. Access properties in JavaScript in a couple of different ways. The first is with dot notation. Here is an example of using dot notation to set the onclick property of a button to a function reference. Example Code: button.onclick = myFunction;
In this example, button is the button element, and myFunction is a reference to a function. When the button is clicked, myFunction will be called.*/

function update(location) {
  monsterStats.style.display = "none";
  button1.innerText = location["button text"][0];/*location["button text"][0] which represents the first element of the array.*/
  button2.innerText = location["button text"][1];
  button3.innerText = location["button text"][2];/*The innerText property controls the text that appears in an HTML element. For example code: <p id="info">Demo content</p>
  const info = document.querySelector("#info");
  info.innerText = "Hello World";
  The following example would change the text of the p element from Demo content to Hello World.*/
  button1.onclick = location["button functions"][0];
  button2.onclick = location["button functions"][1];
  button3.onclick = location["button functions"][2];
  text.innerHTML = location.text;/*The innerHTML property allows you to access or modify the content inside an HTML element using JavaScript. The innerHTML property sets or returns the HTML content inside an element.
  Here is a form element with a label and input element nested inside.
  Example Code:
  <form id="form">
    <label for="first-name">First name</label>
    <input id="first-name" type="text">
  </form>
  If you want to add another label and input element inside the form, then you can use the innerHTML property as shown below:    
  Example Code:
  const formElement = document.getElementById("form");
  const formContent = `<label for="last-name">Last name</label>
  <input id="last-name" type="text">`;
  formElement.innerHTML += formContent;*/
};

function goTown() {
  update(locations[0]);/*To pass arguments by including them within the parentheses of the function call. For example, calling myFunction with an arg argument would look like: myFunction(arg)
  The locations array contains two locations: the "town square" and the "store". Currently it's passing that entire array into the update function. Pass in only the first element of the locations array by adding [0] at the end of the variable. For example: myFunction(arg[0]);
  This is called bracket notation. Values in an array are accessed by index. Indices are numerical values and start at 0, this is called zero-based indexing. An arg[0] would be the first element in the arg array.*/
};

function goStore() {
  update(locations[1]);
};

function goCave() {
  update(locations[2]);
};

function buyHealth() {
  if (gold >= 10) {
    gold -= 10;
    health += 10;
    goldText.innerText = gold;
    healthText.innerText = health;
  }
  else {
    text.innerText = "You do not have enough gold to increase your health.";
  };
};

function buyWeapon() {
  if (currentWeapon < weapons.length - 1) {
    if (gold >= 30) {
      gold -= 30;
      currentWeapon++;
      goldText.innerText = gold;
      let newWeapon = weapons[currentWeapon].name;
      text.innerText = "You now have a " + newWeapon + ".";
      inventory.push(newWeapon);
      text.innerText += " In your inventory you have: " + inventory;
    }
    else {
      text.innerText = "You do not have enough gold to buy a weapon.";
    };
  }
  else {
    text.innerText = "You already have the most powerful weapon!";
    button2.innerText = "Sell weapon for 15 gold";
    button2.onclick = sellWeapon;
  };
};

function sellWeapon() {
  if (inventory.length > 1) {
    gold += 15;
    goldText.innerText = gold;
    let currentWeapon = inventory.shift();
    text.innerText = "You sold a " + currentWeapon + ".";
    text.innerText += " In your inventory you have: " + inventory;
  }
  else {
    text.innerText = "Don't sell your only weapon!";
  };
};

function fightSlime() {
  fighting = 0;
  goFight();
};

function fightBeast() {
  fighting = 1;
  goFight();
};

function fightDragon() {
  fighting = 2;
  goFight();
};

function goFight() {
  update(locations[3]);
  monsterHealth = monsters[fighting].health;
  monsterStats.style.display = "block";/*The style property is used to access the inline style of an element & the display property is used to set the visibility of an element.*/
  monsterName.innerText = monsters[fighting].name;
  monsterHealthText.innerText = monsterHealth;
};

function attack() {
  text.innerText = "The " + monsters[fighting].name + " attacks.";
  text.innerText += " You attack it with your " + weapons[currentWeapon].name + ".";
  health -= getMonsterAttackValue(monsters[fighting].level);
  if (isMonsterHit()) {
    monsterHealth -= weapons[currentWeapon].power + Math.floor(Math.random() * xp) + 1; /*The Math object in JavaScript contains static properties and methods for mathematical constants and functions. One of those is Math.random(), which generates a random number from 0 (inclusive) to 1 (exclusive). Math.floor(), which rounds a given number down to the nearest integer. Using these, you can generate a random number within a range. For example, this generates a random number between 1 and 5: Math.floor(Math.random() * 5) + 1;.*/
  }
  else {
    text.innerText += " You miss.";
  };
  healthText.innerText = health;
  monsterHealthText.innerText = monsterHealth;
  if (health <= 0) {
    lose();
  }
  else if (monsterHealth <= 0) {
    if (fighting === 2) {
      winGame();
    }
    else {
      defeatMonster();
    };
  };
  if (Math.random() <= .1 && inventory.length !== 1) { //The logical AND operator (&&) to make both conditions the same.
    text.innerText += " Your " + inventory.pop() + " breaks.";
    currentWeapon--; //A decrement operator -- that can be used to decrease a variable's value by 1
  };
};

function getMonsterAttackValue(level) {
  const hit = (level * 5) - (Math.floor(Math.random() * xp)); //This will set the monster's attack to five times their level minus a random number between 0 and the player's xp.
  console.log(hit);
  return hit > 0 ? hit : 0; //The ternary operator is a conditional operator and can be used as a one-line if-else statement. The syntax is: condition ? expressionIfTrue : expressionIfFalse
};

function isMonsterHit() {
  return Math.random() > .2 || health < 20; //Player should hit if either Math.random() > 0.2 or if the player's health is less than 20
  /*The logical OR operator (||) will use the first value if it is truthy, that is, anything apart from NaN, null, undefined, 0, -0, 0n, "", and false. Otherwise, it will use the second value.*/
};

function dodge() {
  text.innerText = "You dodged the attack from the " + monsters[fighting].name;
};

function defeatMonster() {
  gold += Math.floor(monsters[fighting].level * 6.7); //Use Math.floor() to round the result down to the nearest integer.
  xp += monsters[fighting].level;
  goldText.innerText = gold;
  xpText.innerText = xp;
  update(locations[4]);
};

function lose() {
  update(locations[5]);
};

function winGame() {
  update(locations[6]);
};

function restart() {
  xp = 0;
  health = 100;
  gold = 50;
  currentWeapon = 0;
  inventory = ["stick"];
  goldText.innerText = gold;
  healthText.innerText = health;
  xpText.innerText = xp;
  goTown();
};

function easterEgg() {
  update(locations[7]);
};

function pickTwo() {
  pick(2);
};

function pickEight() {
  pick(8);
};

function pick(guess) {
  const numbers = [];
  while (numbers.length < 10) {
    numbers.push(Math.floor(Math.random() * 11)); //To push a random number between 0 and 10 to the end of the numbers array.
  };
  text.innerText = "You picked " + guess + ". Here are the random numbers:\n";  //\n => to escape from string quotes then proceeds to a new line.
  for (let i = 0; i < 10; i++) {
    text.innerText += numbers[i] + "\n";
  };
  if (numbers.includes(guess)) { /*The .includes() method determines if an array contains an element and will return either true or false. Here is an example of the .includes() syntax:
    const numbersArray = [1, 2, 3, 4, 5]
    const number = 3      
    if (numbersArray.includes(number)) {
      console.log("The number is in the array.")
    }*/
    text.innerText += "Right! You win 20 gold!";
    gold += 20;
    goldText.innerText = gold;
  }
  else {
    text.innerText += "Wrong! You lose 10 health!";
    health -= 10;
    healthText.innerText = health;
    if (health <= 0) { //If health is less than or equal to zero, player loses.
      lose();
    }
  };
};
</script>
</html>
<!--One of the most powerful tools is the developer console. Depending on the browser, this might be opened by pressing F12 or Ctrl + Shift + I. On Mac, press Option + âŒ˜ + C and select "Console".
The developer console will include errors that are produced by the code, but it can also be use to see values of variables in the code, which is helpful for debugging.-->
